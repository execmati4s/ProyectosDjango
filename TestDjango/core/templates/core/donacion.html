{% extends "./base.html"%}
{% load static%}

<title>{% block title %} Donacion {% endblock %}</title>

{% block css %}
<link rel="stylesheet" href="{% static 'core/css/estilos.css' %}">
{% endblock %}


{% block body%}
<body>

    <div class="container">
      <main>
        <h4 class="donaciones">DONACIONES</h4>
        <form class="formulario" id="formulario"   action="https://formspree.io/f/xbjwpewe" method="POST">
          <!-- Grupo: Nombre -->
          <div class="formulario__grupo" id="grupo__nombre">
            <label for="nombre" class="formulario__label">Nombre</label>
            <div class="formulario__grupo-input">
              <input type="text" class="formulario__input" name="nombre" id="nombre" placeholder="Javier Espindola">
              <i class="formulario__validacion-estado fas fa-times-circle"></i>
            </div>
            <p class="formulario__input-error">El nombre tiene que ser de 2 a 40 dígitos y solo puede contener letras.</p>
          </div>
    
          <!-- Grupo: Correo Electronico -->
          <div class="formulario__grupo" id="grupo__correo">
            <label for="correo" class="formulario__label">Correo Electrónico</label>
            <div class="formulario__grupo-input">
              <input type="email" class="formulario__input" name="correo" id="correo" placeholder="usuario@hotmail.com">
              <i class="formulario__validacion-estado fas fa-times-circle"></i>
            </div>
            <p class="formulario__input-error">El correo solo puede contener letras, numeros, puntos, guiones y guion bajo.</p>
          </div>
    
          <!-- Grupo: Teléfono -->
          <div class="formulario__grupo" id="grupo__telefono">
            <label for="telefono" class="formulario__label">Teléfono</label>
            <div class="formulario__grupo-input">
              <input type="text" class="formulario__input" name="telefono" id="telefono" placeholder="9361503032">
              <i class="formulario__validacion-estado fas fa-times-circle"></i>
            </div>
            <p class="formulario__input-error">El telefono solo puede contener numeros y el maximo son 9 dígitos.</p>
          </div>

          <!-- Grupo: VALOR DONACION -->
          <div class="formulario__grupo" id="grupo__valor">
            <label for="valor" class="formulario__label">Valor Donacion</label>
            <div class="formulario__grupo-input">
              <input type="number" class="formulario__input" name="valor" id="valor" placeholder="Valor minimo $1.000" min="1000" minlength="4">
              <i class="formulario__validacion-estado fas fa-times-circle"></i>
            </div>
            <p class="formulario__input-error">El valor de la donacion solo puede contener numeros y el maximo son de 8 dígitos.</p>
          </div>
    
          <!-- Grupo: Terminos y Condiciones -->
          <div class="formulario__grupo" id="grupo__terminos">
            <label class="formulario__label">
              <input class="formulario__checkbox" type="checkbox"  name="terminos" id="terminos">
              Acepto los Terminos y Condiciones
            </label>
          </div>
    
          <div class="formulario__mensaje" id="formulario__mensaje">
            <p><i class="fas fa-exclamation-triangle"></i> <b>Error:</b> Por favor llenar el formulario correctamente. </p>
          </div>
    
          <div class="formulario__grupo formulario__grupo-btn-enviar">
            <button onclick="mostrar()" type="submit" class="formulario__btn" id="enviar">Enviar</button>      
            <p class="formulario__mensaje-exito" id="formulario__mensaje-exito">Formulario enviado exitosamente!</p>
          </div>
        </form>
      </main>
    </div>

    <script> 
      const $form = document.querySelector('#formulario')
      const nom = document.getElementById('#nombre');
      const corr = document.getElementById('#correo');
      const tel = document.getElementById('#telefono');
      const val = document.getElementById('#valor');
      const terminos = document.getElementById('terminos');

      $form.addEventListener('submit', handleSubmit)
      event.preventDefault()
      async function handleSubmit(event) {
        event.preventDefault()
        const form = new FormData(this)
        const response = await fetch(this.action, {
          method: this.method,
          body: form,
          headers: {
            'Accept': 'application/json'
          }
        })

        if ((nombre.value == '') || (correo.value == '') || (telefono.value == '') || (valor.value == ''))  {
          alert('DEBE LLENAR TODOS LOS CAMPOS!')
        }else {

        if (terminos.enabled=!terminos.checked){
          alert('Por favor acepte los terminos y condiciones')
          
        }else {
          if (response.ok)
          this.reset()
          alert('PROCESANDO DATOS PARA LA COMPRA...')
          location.replace("tarjeta.html")
      }
        }
      }

    </script>


	  <script src={% static 'core/js/Validaciones.js'%}></script> 
	  <script src="https://kit.fontawesome.com/2c36e9b7b1.js" crossorigin="anonymous"></script>



</body>
</header>
</html>
{% endblock %}